---
description: JTCCommunityにおける情報取り込み・分類システム
globs:
alwaysApply: false
---
# ==========================================================
# 02_jtc_info_intake.mdc - 情報取り込み・分類システム
# ==========================================================

path_reference: "jtc_paths.mdc"

prompt_purpose: |
  本ルールは、入力情報の正規化と分類を確実化し、後続のイベント・ナレッジ処理に耐えるドラフトを作成します。
  例）本ルールは、［対象ドメイン］の事実を整え、合意形成と次アクションを高速化するためのルールです。

prompt_why_questions: |
  ソース種別・日時・種別・公開レベル・タグ・参加者可否を揃え、欠損と曖昧さを排除します。

prompt_why_templates: |
  1画面で必須項目の網羅を確認し、FlowドラフトからStock移行を見据えた構造に統一します。
  なぜそのテンプレートなのか

prompt_principles: |
  短文・断定形／出典・日時・パス明記／欠落は「未記載」／推測禁止／事実と意図を分離／既存トリガー・コマンドは変更しない。

# ======== 情報取り込みシステム統合エージェント ========

system_capabilities:
  core_function: "イベント・勉強会・飲み会などの生情報を正規化してドラフト化"
  data_processing: "発生源（Slack/Connpass/口頭/画像）別の正規化と必須項目補完"
  workflow_management: "Flow→Stock移行を前提とした分類・タグ付け・命名の自動化"
  quality_assurance: "必須フィールドチェックと分類基準の逸脱検知"
  integration_support: "イベント整理・ナレッジ整理ルールへフィールド連携"
  user_experience: "質問ガイドで迷わず入力・分類が完了する体験"

# ======== Phase 1: 収集フェーズ ========

phase_1_description: |
  情報ソースを特定し、イベント/ナレッジのどちらに属するかを判定します。
  不足フィールドを質問で補完し、統一フォーマットに正規化します。
  生成物はFlow/Public配下のドラフトとして保存します。

# ======== Phase 2: 分類フェーズ ========

phase_2_description: |
  種別（もくもく会/勉強会/飲み会/その他）とタグに基づき、保存先候補を提示します。
  プライバシー要件を評価し、公開/非公開の扱いを決定します。
  完了条件は、ドラフトと分類メタ情報の作成です。

# ======== 統合オプション質問 ========

info_intake_questions:
  - key: "source_type"
    prompt: "情報ソース（Slack/Connpass/口頭メモ/画像/その他）:"
    type: "text"
    required: true
    placeholder: "Slack"
  - key: "event_type"
    prompt: "種別（もくもく会/勉強会/飲み会/読書会/その他）:"
    type: "text"
    required: true
    placeholder: "もくもく会"
  - key: "title"
    prompt: "タイトル/テーマ:"
    type: "text"
    required: true
    placeholder: "第12回 生成AIもくもく会"
  - key: "date"
    prompt: "開催日（YYYY-MM-DD）または情報発生日:"
    type: "text"
    required: true
    placeholder: "2025-08-16"
  - key: "summary"
    prompt: "概要/メモ（箇条書き可）:"
    type: "multiline"
    required: false
    placeholder: "目的、内容、決定事項、TODO等"
  - key: "participants"
    prompt: "参加者・関係者（公開可否も併記）:"
    type: "multiline"
    required: false
    placeholder: "A(公開可), B(匿名化)"
  - key: "privacy_level"
    prompt: "公開範囲（public/private/anonymized）:"
    type: "text"
    required: true
    placeholder: "public"
  - key: "tags"
    prompt: "タグ（#event-*, #topic-* など）:"
    type: "multiline"
    required: false
    placeholder: "#event-mokumoku, #topic-genai"

# ======== 情報取り込みプロセス ========

info_intake_steps:
  1_normalize:
    name: "正規化"
    phases:
      - "共通フィールド（title, date, type, summary）へ正規化"
      - "不足項目の補完・バリデーション"
      - "公開レベルの決定"
    quality_standards:
      - "必須フィールドが全て充足"
      - "日付書式の整合性"
      - "分類基準に合致"
  
  2_classify:
    name: "分類"
    phases:
      - "event_typeによりイベント or ナレッジへ分類"
      - "保存先候補（events/knowledge）提示"
      - "タグ・命名規則の適用"
    integration_points:
      - "03 イベント整理: 出欠/運営へ連携"
      - "04 ナレッジ整理: 要約・インデックスへ連携"

# ======== 情報取り込みワークフロー ========

info_intake_workflow:
  phase_1:
    - name: "ドラフト生成"
      action: "create_markdown_file"
      description: "Flow/Publicに取り込みドラフトを作成"
      mandatory: true

# ======== テンプレート ========

info_intake_template: |
  # 情報取り込みドラフト - {{date}} - {{meta.timestamp}}

  ## 概要
  - タイトル: {{title}}
  - 種別: {{event_type}}
  - ソース: {{source_type}}
  - 公開レベル: {{privacy_level}}
  - タグ: {{tags}}

  ## 詳細
  {{summary}}

  ## 参加者
  {{participants}}

  ---
  **文書情報**
  - 作成日: {{meta.timestamp}}
  - ドメイン: jtc
  - エージェント: JTCCommunity
  - 分類: 情報取り込み

# ======== エラーハンドリング ========

error_handling:
  missing_required:
    message: "必須項目が不足しています"
    recovery_actions:
      - "質問に戻って未入力項目を補完してください"
      - "日付フォーマットを確認してください"

# ======== 設定 ========

info_intake_settings:
  default_privacy: "public"
  allow_types: ["もくもく会", "勉強会", "飲み会", "読書会", "その他"]

# ======== 統合ポイント ========

integration_points:
  event_management:
    trigger: "イベント整理"
    action: "03_jtc_event_management.mdc => event_management_questions"

# ======== 品質保証 ========

quality_assurance:
  mandatory_checks:
    - "title/date/typeが設定されている"
    - "privacy_levelが決定されている"

# ======== 成功メトリクス ========

success_metrics:
  - "ドラフト作成成功率 > 99%"
  - "分類一致率 > 95%"
  - "補完質問平均 < 5問"
